head	1.2;
access;
symbols;
locks; strict;
comment	@-- @;


1.2
date	2008.11.24.16.46.29;	author baker;	state Exp;
branches;
next	1.1;

1.1
date	2008.11.24.02.05.39;	author baker;	state Exp;
branches;
next	;


desc
@@


1.2
log
@*** empty log message ***
@
text
@--  $Id: threads-sched_pls.ads 1.1 2008/11/24 15:54:58 baker Exp baker $

-- deadline polling server scheduler policy plug-in

with Replenishments;
with Aperiodic_Server_Parameters; use Aperiodic_Server_Parameters;
with Threads.Aperiodic_Policies;
package Threads.Sched_PLS is

   type Object is new
     Threads.Aperiodic_Policies.Object with private;

   procedure Bind_Parms
     (P : in out Object;
      Parms : Aperiodic_Server_Parameters.Parameters);
   procedure Init
     (P : in out Object);
   procedure Suspend
     (P : in out Object);
   procedure Go
     (P : in out Object);
   procedure Stop
     (P : in out Object);

private

   package Replenishment_Events is
      type Object is new Events.Object with record
         T : Thread_Ref;
      end record;
      procedure Handler (E : in out Object);
      function Name (E : Object) return String;
   end Replenishment_Events;

   package Budget_Exhaustion_Events is
      type Object is new Events.Object with record
         T : Thread_Ref;
      end record;
      procedure Handler (E : in out Object);
      function Name (E : Object) return String;
   end Budget_Exhaustion_Events;

   type Object is new
     Threads.Aperiodic_Policies.Object with record
        -- parameters
        Parms : Aperiodic_Server_Parameters.Parameters;
        --  events
        Replenishment : aliased Replenishment_Events.Object;
        Exhaustion: aliased Budget_Exhaustion_Events.Object;
        --  for recent budget usage accounting
        Usage : Time;
        Last_Usage_Update_Time : Time;
        --  The most recent time we checked this thread's
        --  budget usage and updated T.P.Usage.
   end record;

end Threads.Sched_PLS;
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
--  $Id$
a19 2
   procedure New_Current_Thread
     (P : in out Object);
a46 2
        --  replenishment queue
        R_Queue : Replenishments.Queues.Object;
a51 3
        --  The amount of the current chunk that has
        --  been used.  Invariant:
        --  P.Usage <= P.R_Queue.Front_Of.R_Amount.
@
